# When adding effects directly in on_actions always consider 
# if it would be best to do so through a scripted effect. 
# on_actions with a lot of script in them are harder to get an overview of.
# country
# TODO is this the best way of doing it?
on_startup = {
	# Add factions to whoever needs them
	if = {
		limit = {
			culture_group = latin
			NOT = {
				culture = dalmatian
				culture = maltese
				tag = PAP
			}
		}
		add_faction = guelphs
		add_faction = ghibellines
		add_faction_influence = {
			faction = ghibellines
			influence = 50
		}
	}
}

# ROOT = New vassal, FROM = Overlord
on_create_vassal = {
	if = {
		limit = {
			ROOT = {
				culture = tuscan
			}
		}
		add_country_modifier = {
			name = tuscan_subjugation
			duration = 3650
		}
	}
}

on_country_released = {
	if = {
		limit = {
			has_country_modifier = tuscan_subjugation
		}
		remove_country_modifier = tuscan_subjugation
	}
}

on_religion_change = {
	if = {
		limit = {
			has_faction = guelphs
			NOT = {
				religion = catholic
			}
		}
		country_event = {
			id = tuscan_factions.6
			days = 3
			tip = GUELPHS_ARE_GONE_TOOLTIP
		}
	}
}